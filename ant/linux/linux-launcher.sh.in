#!/bin/bash
##########################################################################################
#                            ${project.name} Linux Launcher                                      #
##########################################################################################
#  Description:                                                                          #
#    1. Determines if program should autostart (if applicable)                           #
#    2. Launch application                                                               #                                                                         #
#                                                                                        #
#  Usage:                                                                                #
#    $ ./launcher                                                                        #
#                                                                                        #
#  Options:                                                                              #
#    -A    Check autostart file to determine if ${project.name} should launch            #
#                                                                                        #
##########################################################################################

destdir="${linux.installdir}"
jarfile="${destdir}/${project.filename}.jar"
localautostart="${linux.datadir.local}/${autostart.name}"
globalautostart="${linux.datadir.shared}/${autostart.name}"

if [ "$1" = "-A" ]
then
    if [ -f "$localautostart" ];
    then
        if [ "$(head -n 1 $localautostart)" = "0" ]
        then
           echo "Skipping autostart"
           exit 0
        fi
    else
        if [ -f "$globalautostart" ];
        then
            if [ "$(head -n 1 $globalautostart)" = "0" ]
            then
                echo "Skipping autostart"
                exit 0
            fi
        fi
    fi
fi
eval java ${launch.opts} -jar \"${jarfile}\"
exit 0